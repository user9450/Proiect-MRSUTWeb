@{
     ViewBag.Title = "Edit User";
}

@model eUseControl.Domain.Entities.User.UDbTable

<main>
     <section class="edit-user-section">
          <div class="edit-user-container">
               @using (Html.BeginForm("EditUser", "Admin", FormMethod.Post, new { id = "editUserForm" }))
               {
                    @Html.AntiForgeryToken()

                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    @Html.HiddenFor(model => model.Id)

                    <div class="form-group">
                         <label for="Email">Email</label>
                         <input type="email" id="Email" name="Email" value="@Model.Email" readonly />
                    </div>
                    <div class="form-group">
                         <label for="Nume">Nume</label>
                         <input type="text" id="Nume" name="Nume" value="@Model.Nume" required minlength="5" maxlength="20" />
                         <span class="text-danger" id="numeError"></span>
                    </div>
                    <div class="form-group">
                         <label for="Prenume">Prenume</label>
                         <input type="text" id="Prenume" name="Prenume" value="@Model.Prenume" required minlength="5" maxlength="20" />
                         <span class="text-danger" id="prenumeError"></span>
                    </div>
                    <div class="form-group">
                         <label for="Password">Password</label>
                         <input type="password" id="Password" name="Password" value="@Model.Password" required minlength="8" maxlength="30" />
                         <span class="text-danger" id="passwordError"></span>
                    </div>
                    <div class="form-group submit-container">
                         <button type="submit">Save Changes</button>
                    </div>
               }
          </div>
     </section>
</main>

<script>
    document.getElementById('editUserForm').addEventListener('submit', function (event) {
        var isValid = true;

        // Clear error mesages
        document.getElementById('emailError').textContent = '';
        document.getElementById('numeError').textContent = '';
        document.getElementById('prenumeError').textContent = '';
        document.getElementById('passwordError').textContent = '';

        var email = document.getElementById('Email').value;
        if (email.length < 10 || email.length > 30) {
            isValid = false;
            document.getElementById('emailError').textContent = 'Email must be between 10 and 30 characters.';
        }

        var nume = document.getElementById('Nume').value;
        if (nume.length < 5 || nume.length > 20) {
            isValid = false;
            document.getElementById('numeError').textContent = 'Nume must be between 5 and 20 characters.';
        }

        var prenume = document.getElementById('Prenume').value;
        if (prenume.length < 5 || prenume.length > 20) {
            isValid = false;
            document.getElementById('prenumeError').textContent = 'Prenume must be between 5 and 20 characters.';
        }

        var password = document.getElementById('Password').value;
        if (password.length < 8 || password.length > 30) {
            isValid = false;
            document.getElementById('passwordError').textContent = 'Password must be between 8 and 30 characters.';
        }

        // Prevent form submission if not valid
        if (!isValid) {
            event.preventDefault();
        }
    });
</script>
